; MATH LIBRARY	26 SEPTEMBER 2021

; DIVISION: A - DIVISOR, B - DIVIDEND
; RESULTS: A - QUOTIENT B - REMAINDER
DIV8:	MVI	C,0H	; ZERO C
DIVL:	CMP	B	; COMPARE DIVISOR AND DIVIDEND
	JC	DIVND	; IF LESS GO TO END
	SBB	B	; SUBSTRACT ONE MORE DIVIDEND
	INR	C	; INCREMENT QUOTIENT
	JMP	DIVL	; LOOP
DIVND:	MOV	B,A	; REMAINDER
	MOV	A,C	; QUOTIENT
	RET

; 16 BIT DIV
; HL - DIVISOR, DE - DIVIDEND
; HL - QUOTIENT, DE - REMINDER
DIV16:	PUSH	B	; SAVE REGISTERS
	LXI	B,0	; RESET REMINDER
DV16L:	CALL	CMP16	; COMPARE
	JC	DV16E	; IF SMALLER, END
	CALL	SUB16	; ELSE, SUBSTRACT
	INX	B	; INCREASE REMINDER
	JMP	DV16L	; LOOP
DV16E:	XCHG		; REMINDER
	MOV	H,B	; QUOTIENT
	MOV	L,C
	POP	B
	RET

; 16 BIT SUBSTRACT
; HL - OPERAND, DE - OPERAND
; HL - RESULT
SUB16:	MOV	A,L	; LOWER BYTE
	SUB	E	; SUBSTRACT BYTE
	MOV	L,A	; RECORD RESULT
	MOV	A,H	; HIGHER BYTE
	SBB	D	; SUBSTRACT BYTE
	MOV	H,A	; RECORD RESULT
	RET

; 16 BIT COMPARE
; HL - OPERAND, DE - OPERAND
CMP16:	MOV	A,H	; COMPARE HIGHER BYTE
	CMP	D
	RNZ		; RETURN IF DIFFERENT
	MOV	A,L	; COMPARE LOWER BYTE
	CMP	E
	RET
